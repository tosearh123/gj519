"use strict";var _createClass=function(){function n(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,i){return t&&n(e.prototype,t),i&&n(e,i),e}}();function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var center=document.querySelector(".header_center_right");console.log(center),center.onclick=function(){"shopCar"==window.event.target.className&&(location.href="../html/car.html")};var reg=/cateId=(\d+)/;reg.test(location.search)||(location.href="../html/list.html");var huan,id=reg.exec(location.search)[1],container=document.querySelector(".container_top"),tou=document.querySelector(".tou"),login=getCookie("login");function renderHtml(e){container.innerHTML='\n    <h3>首页 > 年份原浆 > 原浆标品</h3>\n    <div class="top_center">\n    <div class="box">\n        <div class="show">\n            <img src="'+e.pic+'">\n            <div class="mask"></div>\n        </div>\n        <div class="list">\n            <p class="active">\n                <img midelImg="'+e.pic+'" bigImg="'+e.pic+'" src="'+e.pic+'">\n            </p>\n            <p>\n                <img midelImg="'+e.pic+'" bigImg="'+e.pic+'" src="'+e.pic+'">\n            </p>\n            <p>\n                <img midelImg="'+e.pic+'" bigImg="'+e.pic+'" src="'+e.pic+'">\n            </p>\n            <p>\n                <img midelImg="'+e.pic+'" bigImg="'+e.pic+'" src="'+e.pic+'">\n            </p>\n            <p>\n                <img midelImg="'+e.pic+'" bigImg="'+e.pic+'" src="'+e.pic+'">\n            </p>\n        </div>\n        <div class="enlarge" style="background-image:url('+e.pic+')"></div>\n    </div>\n\n        <div class="top_right">\n            <p>'+e.name+"</p>\n            <p>"+e.say+"</p>\n            <p>\n                <span>明星</span>\n                <span>已售"+e.buyCount+'</span>\n            </p>\n            <div class="right_price">\n                <p>原&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;价 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<s>￥'+e.price+"</s></p>\n                <p>\n                    <span>官网价格 </span> &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;\n                    <span>￥"+e.price+'</span>\n                </p>\n                <div class="code">扫码购买更加优惠</div>\n\n            </div>\n            <div class="size">\n                <p>选择规格</p>\n                <div class="sizePic">\n                    <img src="'+e.pic+'" alt="">\n                </div>\n            </div>\n            <div class="check">\n                <p>选择数量</p>\n                <div class="check_number">\n                    <p class="check_down">-</p>\n                    <input type="number" class="number" min="1" value="1">\n                    <p class="check_up">+</p>\n                </div>\n            </div>\n            <div class="choose">\n                <button class="goCar" id="goCar">立即购买</button>\n                <button class="addCar" id="addCar">加入购物车</button>\n            </div>\n        </div>\n    </div>'}login?(tou.innerHTML=login+'<b class="huan">[退出]</b>',(huan=document.querySelector(".huan")).onclick=function(){console.log(1),delCookie("login"),tou.innerHTML=' <li class="login"><a href="../html/login.html"> 登录</a> </li>\n    <i>|</i>\n    <li class="zhuce"><a href="../html/register.html">注册</a> </li>'}):localStorage.setItem("url","../html/details.html?cateId="+id),pAjax({url:"../api/getDetail.php",data:{id:id}}).then(function(e){console.log(e),renderHtml(e.detail),new Enlarge(".box")});var Enlarge=function(){function t(e){_classCallCheck(this,t),this.ele=document.querySelector(e),this.show=this.ele.querySelector(".show"),this.showImg=this.show.querySelector("img"),this.mask=this.show.querySelector(".mask"),this.btn=this.ele.querySelectorAll(".list p"),this.enlarge=this.ele.querySelector(".enlarge"),this.init()}return _createClass(t,[{key:"init",value:function(){var i=this;this.show.onmouseover=function(){i.mask.style.display=i.enlarge.style.display="block",i.setStyle()},this.show.onmouseout=function(){i.mask.style.display=i.enlarge.style.display="none"},this.show.onmousemove=function(){i.maskMove()},this.btn.forEach(function(t,e){t.onclick=function(){var e=window.event;i.changeImage(t,e.target)}})}},{key:"setStyle",value:function(){this.showWidth=this.show.offsetWidth,this.showHeight=this.show.offsetHeight,this.maskWidth=this.mask.offsetWidth,this.maskHeight=this.mask.offsetHeight;var e=getStyle(this.enlarge,"backgroundSize");this.styleX=parseInt(e.split(" ")[0]),this.styleY=parseInt(e.split(" ")[1]),this.enlargeWidth=this.maskWidth*this.styleX/this.showWidth,this.enlargeHeight=this.maskHeight*this.styleY/this.showHeight,this.enlarge.style.width=this.enlargeWidth+"px",this.enlarge.style.height=this.enlargeHeight+"px"}},{key:"maskMove",value:function(){var e=window.event,t=e.pageX-this.ele.offsetLeft,e=e.pageY-this.ele.offsetTop,t=t-this.maskWidth/2,e=e-this.maskHeight/2;t<=0&&(t=0),e<=0&&(e=0),t>=this.showWidth-this.maskWidth&&(t=this.showWidth-this.maskWidth),e>=this.showHeight-this.maskHeight&&(e=this.showHeight-this.maskHeight),this.mask.style.left=t+"px",this.mask.style.top=e+"px",this.enlargeMove(t,e)}},{key:"enlargeMove",value:function(e,t){e=e*this.styleX/this.showWidth,t=t*this.styleY/this.showHeight;this.enlarge.style.backgroundPosition=-e+"px "+-t+"px"}},{key:"changeImage",value:function(e,t){console.log(1),this.btn.forEach(function(e){e.classList.remove("active")}),e.classList.add("active");e=t.getAttribute("midelimg");this.showImg.src=e;t=t.getAttribute("bigimg");console.log(t),this.enlarge.style.backgroundImage='url("'+t+'")'}}]),t}();container.onclick=function(){var e=document.querySelector(".number").value,t=window.event;if("goCar"==t.target.id&&(location.href="../html/car.html"),"addCar"==t.target.id){var i=getCookie("login");if(!i)return location.href="../html/login.html",void localStorage.setItem("url","../html/details.html?cateId="+id);pAjax({url:"../api/addCarData.php",data:{tel:i,goods_id:id,num:e}}).then(function(e){console.log(e)})}if("+"==t.target.innerHTML&&(e=++t.target.previousElementSibling.value,console.log(e)),"-"==t.target.innerHTML){if(t.target.nextElementSibling.value<=1)return t.target.nextElementSibling.value=1;e=--t.target.nextElementSibling.value,console.log(e)}},$(".tab_1").hover(function(){console.log(1),$(this).addClass("active").siblings().removeClass("active");var e=$(this).index();$(".tab_2").eq(e).addClass("active").siblings().removeClass("active")}),$(".tab_3").on("click",function(){$(this).addClass("hover").siblings().removeClass("hover");var e=$(this).index();$(".tab_4").eq(e).addClass("chang").siblings().removeClass("chang")});